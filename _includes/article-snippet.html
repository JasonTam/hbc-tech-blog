{% assign showExcerpt = include.excerpt %}
{% assign showFeatureImage = include.featureImage %}

<section class="snippet">
    <a href="{{ site.url }}{{ post.url }}">
    {% if showFeatureImage == true  %}
        {% if post.image.feature %}
            <img class="snippet__feature-image" src=
            {% if post.image.feature contains 'http' %}
            "{{ post.image.feature }}"
            {% else %}
            "{{ site.url }}/assets/images/{{ post.image.feature }}"
            {% endif %}
            alt="{{ post.title }}">
        {% else %}
            <img class="snippet__feature-image" src="http://placehold.it/1920x800/" alt="{{ post.title }}" >
        {% else %}
            <img class="snippet__feature-image" src="http://placehold.it/1920x800/" alt="{{ post.title }}" >
        {% endif %}
    {% endif %}
    </a>
    <h1 class="snippet__title">
        <a href="{{ site.url }}{{ post.url }}" class="snippet__link" title="{{ post.title }}">{{ post.title }}</a>
    </h1>
    <div class="snippet__meta">
        <span class="meta__day">{{ post.date | date: "%-d" }}</span>
        <span class="meta__month">{{ post.date | date: "%b" | upcase }}</span>
        <span class="meta__year">{{ post.date | date: "%Y" }}</span>

        {% if post.categories.size > 0 %}
            {% for cat in site.category %}
                {%if cat.name == post.categories.first %}
                    {% assign featureCategory = cat %}
                {% endif %}
            {% endfor %}

            {% if featureCategory != nil %}
                <a class="meta__category-link" href="{{ site.url }}/category/{{ post.categories.first }}">{{post.categories.first}}</a>
            {% else %}
                <a class="meta__category-link" href="{{ site.url }}/categories/#{{ post.categories.first }}">{{post.categories.first}}</a>
            {% endif %}
        {% endif %}

        {% if post.author != '' %}
            {% for authorName in post.author %}
                {% assign authorLink = authorName | replace: ' ', '-' | downcase %}
                <!-- if author exists in site.authors, send user to author's page -->
                {% for a in site.authors %}
                    {%if a.name == authorName %}
                    <a class="meta__author-link" href="{{ site.url }}/authors/{{ authorLink }}">
                    {% endif %}
                {% endfor %}

                {{authorName}}

                {% for a in site.authors %}
                    {%if a.name == authorName %}
                    </a>
                    {% endif %}
                {% endfor %}

                {%- unless forloop.last -%}
                <span>,</span>
                {% endunless %}
            {% endfor %}
        {% else %}
            {{ site.title }}
        {% endif %}
    </div>
    {% if post.excerpt and showExcerpt == true %}
        <a href="{{ site.url }}{{ post.url }}" class="snippet__link" title="{{ post.title }}">
        <p class="snippet__excerpt">
        {{ post.excerpt | strip_html | truncatewords: 70 }}
    {% endif %}
    </p></a>
</section>
